<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>JARCHIVE.NET</title>

  <link rel="icon" href="Icons/Icon website.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- shared -->
  <link rel="stylesheet" href="shared/audio-player.css" />
  <link rel="stylesheet" href="shared/navigation.css" />

  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --muted:rgba(255,255,255,.65);
      --red:#ff0000;
      --panel-pad: clamp(48px, 7vw, 96px);
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html{ scroll-behavior:smooth; }
    body{
      background: var(--bg);
      color: var(--fg);
      font-family: 'Courier New', Courier, monospace;
      overflow-x:hidden;
      padding-bottom: 110px; /* room for fixed audio player */
    }

    /* Background layers */
    .bg-layer{
      position:fixed;
      inset:0;
      z-index:-2;
      background-image:
        url('file-qNJ2r3YByA3LbPQnduwxrQUF.png'),
        repeating-linear-gradient(
          0deg,
          rgba(255, 0, 0, 0.10) 0%,
          rgba(0, 0, 0, 0.10) 20%,
          rgba(255, 0, 0, 0.06) 40%,
          rgba(0, 0, 0, 0.06) 60%,
          rgba(255, 0, 0, 0.12) 80%,
          rgba(0, 0, 0, 0.12) 100%
        );
      background-blend-mode: overlay;
      background-size: cover, cover;
      background-position: center;
      background-repeat: no-repeat, repeat;
      filter: contrast(1.05) saturate(1.05);
    }
    .bg-vignette{
      position:fixed;
      inset:0;
      z-index:-1;
      background: radial-gradient(circle at 50% 40%, rgba(0,0,0,0) 0%, rgba(0,0,0,.65) 70%, rgba(0,0,0,.9) 100%);
      pointer-events:none;
    }

    /* Top brand */
    .top-brand{
      position:fixed;
      top: 18px;
      left: 18px;
      z-index: 9998;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid rgba(255,0,0,.45);
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
    }
    .top-brand .dotnet{
      font-weight: 700;
      letter-spacing: .15em;
      color: #fff;
      text-transform: uppercase;
      font-size: 12px;
    }
    .top-brand .pill{
      color: rgba(255,255,255,.75);
      font-size: 11px;
      letter-spacing: .2em;
      text-transform: uppercase;
    }

    /* ===== Side nav (flush-left) ===== */
    .side-nav{
      position: fixed;
      left: -22px; /* almost off-screen */
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 16px;
      z-index: 9999;
      user-select: none;
    }
    .side-nav a{
      position: relative;
      writing-mode: vertical-rl;
      transform: rotate(180deg);
      color: rgba(255,255,255,.55);
      text-decoration:none;
      font-size: 12px;
      letter-spacing: .35em;
      text-transform: uppercase;
      padding: 8px 2px;
      border-radius: 999px;
      transition: .2s ease;
    }
    .side-nav a:hover{ color:#fff; }
    .side-nav a.is-active{
      color:#fff;
      text-shadow: 0 0 16px rgba(255,0,0,.65);
      outline: 1px solid rgba(255,0,0,.45);
      background: rgba(255,0,0,.10);
    }
    .side-nav a.is-active::after{
      content:"";
      position:absolute;
      right: -10px;
      top: 50%;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      transform: translateY(-50%);
      background: rgba(255,0,0,.9);
      box-shadow: 0 0 18px rgba(255,0,0,.55);
      animation: navPulse 1.2s ease-in-out infinite;
    }
    @keyframes navPulse{
      0%,100% { transform: translateY(-50%) scale(1); opacity: .85; }
      50%     { transform: translateY(-50%) scale(1.35); opacity: 1; }
    }

    main{ width:100%; }
    section.panel{
      min-height: 100vh;
      padding: var(--panel-pad);
      display:flex;
      align-items:center;
    }
    .panel-inner{
      width: min(1100px, 100%);
      margin: 0 auto;
    }

    /* HOME */
    #home.panel{ padding: 0; position: relative; }
    .hero{
      width:100%;
      height:100vh;
      position:relative;
      overflow:hidden;
      display:flex;
      align-items:flex-end;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(to top, rgba(0,0,0,.85) 0%, rgba(0,0,0,.35) 55%, rgba(0,0,0,.10) 100%);
      pointer-events:none;
      z-index:1;
    }
    .hero-img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:.20;
      filter: contrast(1.05);
    }
    .hero-img.desktop{ display:block; }
    .hero-img.mobile{ display:none; }

    .hero-content{
      position:relative;
      z-index:2;
      width:min(1100px, 100%);
      margin: 0 auto;
      padding: clamp(24px, 5vw, 64px);
    }
    .hero-kicker{
      color: rgba(255,255,255,.8);
      letter-spacing: .35em;
      text-transform: uppercase;
      font-size: 12px;
      margin-bottom: 14px;
    }
    .hero-title{
      font-size: clamp(40px, 6vw, 78px);
      letter-spacing: .06em;
      text-transform: uppercase;
      line-height: .95;
      text-shadow: 0 0 28px rgba(255,0,0,.35);
    }
    .hero-subtitle{
      margin-top: 14px;
      color: rgba(255,255,255,.75);
      max-width: 62ch;
      line-height: 1.6;
      font-size: clamp(14px, 2vw, 18px);
    }
    .hero-cta{
      margin-top: 22px;
      display:flex;
      gap: 12px;
      flex-wrap:wrap;
    }

    .btn{
      padding: 12px 18px;
      border: 1px solid rgba(255,0,0,.65);
      background: rgba(0,0,0,.35);
      color: #fff;
      text-decoration:none;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: .22em;
      text-transform: uppercase;
      display:inline-flex;
      align-items:center;
      gap:10px;
      transition: .2s ease;
      cursor:pointer;
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 0 22px rgba(255,0,0,.25);
      background: rgba(255,0,0,.12);
    }

    .section-title{
      font-size: clamp(28px, 3.5vw, 44px);
      text-transform: uppercase;
      letter-spacing: .18em;
      margin-bottom: 24px;
    }
    .section-note{
      color: var(--muted);
      line-height: 1.7;
      max-width: 70ch;
    }

    /* MUSIC release card */
    .release-shell{
      border: 1px solid rgba(255,0,0,.40);
      background: rgba(0,0,0,.45);
      border-radius: 18px;
      padding: 18px;
      backdrop-filter: blur(10px);
    }
    .release-card{
      display:flex;
      align-items:center;
      gap: 22px;
      padding: 14px;
      border-radius: 14px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.06);
    }
    .release-cover{
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 12px;
      border: 1px solid rgba(255,0,0,.55);
      box-shadow: 0 0 18px rgba(255,0,0,.25);
      flex: 0 0 auto;
    }
    .release-info{ flex:1; }
    .release-title{
      font-size: 22px;
      margin-bottom: 6px;
      letter-spacing: .06em;
    }
    .release-artist{ color: rgba(255,0,0,.85); margin-bottom: 10px; }
    .release-date{ color: rgba(255,255,255,.65); margin-bottom: 14px; }
    .release-actions{ display:flex; gap: 10px; flex-wrap:wrap; }

    /* MEDIA */
    .media-gallery{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 18px;
    }
    .media-item{
      position:relative;
      overflow:hidden;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.35);
      transition: .2s ease;
    }
    .media-item:hover{
      transform: translateY(-2px);
      border-color: rgba(255,0,0,.55);
      box-shadow: 0 0 26px rgba(255,0,0,.20);
    }
    .media-item img,
    .media-item video{
      width:100%;
      height: 220px;
      object-fit: cover;
      display:block;
    }
    .media-overlay{
      position:absolute;
      left:0; right:0; bottom:0;
      padding: 16px;
      background: linear-gradient(to top, rgba(0,0,0,.85), rgba(0,0,0,0));
    }
    .media-title{ font-size: 14px; letter-spacing:.08em; text-transform: uppercase; }
    .media-type{ margin-top:6px; color: rgba(255,0,0,.85); font-size: 12px; letter-spacing:.22em; text-transform: uppercase; }

    /* Footer */
    footer{
      padding: 40px 20px;
      border-top: 1px solid rgba(255,0,0,.35);
      background: rgba(0,0,0,.75);
      text-align:center;
    }
    .footer-social-links{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap: 18px;
      flex-wrap:wrap;
    }
    .footer-social-links a{
      color: rgba(255,255,255,.75);
      text-decoration:none;
      letter-spacing:.18em;
      text-transform: uppercase;
      font-size: 12px;
      padding: 10px 14px;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      transition:.2s ease;
      display:inline-flex;
      gap:10px;
      align-items:center;
    }
    .footer-social-links a:hover{
      color:#fff;
      border-color: rgba(255,0,0,.55);
      box-shadow: 0 0 18px rgba(255,0,0,.20);
      background: rgba(255,0,0,.10);
    }

    /* Scroll reveal */
    .panel{
      opacity: 0;
      transform: translateY(14px);
      filter: blur(6px);
      transition: opacity .7s ease, transform .7s ease, filter .7s ease;
      will-change: opacity, transform, filter;
    }
    .panel.is-visible{
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
    #home.panel{ opacity: 1; transform: none; filter: none; }

    /* ===== Minimal Password Gate ===== */
    .gate{
      position: fixed;
      inset: 0;
      z-index: 20000;
      display: grid;
      place-items: center;
      background: rgba(0,0,0,.86);
      backdrop-filter: blur(10px);
    }
    .gate-card{
      width: min(520px, calc(100% - 48px));
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.70);
      border-radius: 18px;
      padding: 22px;
      box-shadow: 0 30px 90px rgba(0,0,0,.65);
    }
    .gate-title{
      font-size: 12px;
      letter-spacing: .28em;
      text-transform: uppercase;
      color: rgba(255,255,255,.75);
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 18px;
    }
    .gate-title b{ color:#fff; letter-spacing:.22em; }
    .gate-row{
      display:flex;
      gap: 12px;
      align-items:center;
    }
    .gate-input{
      flex: 1;
      padding: 12px 12px;
      border-radius: 12px;
      background: #050505;
      border: 1px solid rgba(255,255,255,.18);
      color: #fff;
      outline: none;
      font-family: inherit;
      letter-spacing: .10em;
    }
    .gate-input:focus{
      border-color: rgba(255,0,0,.55);
      box-shadow: 0 0 0 3px rgba(255,0,0,.15);
    }
    .gate-ok{
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid rgba(255,0,0,.55);
      background: rgba(255,0,0,.08);
      color: #fff;
      letter-spacing: .18em;
      text-transform: uppercase;
      cursor: pointer;
      font-family: inherit;
    }
    .gate-ok:hover{
      background: rgba(255,0,0,.14);
    }
    .gate-msg{
      margin-top: 12px;
      min-height: 18px;
      color: rgba(255,255,255,.70);
      font-size: 12px;
      letter-spacing: .10em;
      text-transform: uppercase;
    }
    body.is-locked > :not(#gate){
      pointer-events:none;
      user-select:none;
    }

    /* Mobile */
    @media (max-width: 900px){
      .side-nav{ display:none; }
      .release-card{ flex-direction:column; text-align:center; }
      .release-actions{ justify-content:center; }
      .release-info{ text-align:center; }
      .top-brand{ right: 18px; left: auto; }
      .hero-img.desktop{ display:none; }
      .hero-img.mobile{ display:block; }
    }
  </style>
</head>

<body>
  <!-- Minimal Password Gate -->
  <div id="gate" class="gate" aria-hidden="false">
    <div class="gate-card" role="dialog" aria-modal="true" aria-labelledby="gateTitle">
      <div class="gate-title" id="gateTitle">
        <b>JARCHIVE.NET</b>
        <span>ACCESS</span>
      </div>

      <form id="gateForm" class="gate-row" autocomplete="off">
        <input id="gatePass" class="gate-input" type="password" placeholder="Password" />
        <button class="gate-ok" type="submit">OK</button>
      </form>

      <div id="gateMsg" class="gate-msg" aria-live="polite"></div>
    </div>
  </div>

  <div class="bg-layer" aria-hidden="true"></div>
  <div class="bg-vignette" aria-hidden="true"></div>

  <div class="top-brand">
    <div class="dotnet">JARCHIVE.NET</div>
    <div class="pill">HOME</div>
  </div>

  <nav class="side-nav" aria-label="Primary">
    <a href="#music">MUSIC</a>
    <a href="#stations">STATIONS</a>
    <a href="#media">MEDIA</a>
    <a href="#blog">BLOG</a>
    <a href="#home">JARCHIVE</a>
  </nav>

  <main>
    <section class="panel" id="home">
      <div class="hero">
        <img class="hero-img desktop" src="file-qNJ2r3YByA3LbPQnduwxrQUF.png" alt="" />
        <img class="hero-img mobile"  src="file-qNJ2r3YByA3LbPQnduwxrQUF.png" alt="" />

        <div class="hero-content">
          <div class="hero-kicker">Jarchive</div>
          <h1 class="hero-title">JARCHIVE.NET</h1>
          <p class="hero-subtitle">
            Community :) Stay tuned — new stuff is always loading in here. Music, stations, media, and blog updates.
          </p>
          <div class="hero-cta">
            <a class="btn" href="#music"><i class="fas fa-play"></i> Music</a>
            <a class="btn" href="#media"><i class="fas fa-photo-film"></i> Media</a>
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="music">
      <div class="panel-inner">
        <h2 class="section-title">Music</h2>
        <p class="section-note">Latest release pulls from your audio player data (same behavior as before).</p>

        <div class="release-shell" style="margin-top:22px;">
          <div class="release-card" id="latest-release-card">
            <div style="color: rgba(255,255,255,.65); padding: 18px;">
              Loading latest release…
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="stations">
      <div class="panel-inner">
        <h2 class="section-title">Stations</h2>
        <p class="section-note">Drop your station embeds/links here (SoundCloud sets, Mixcloud, radio shows, playlists, whatever).</p>

        <div style="margin-top:26px; border:1px solid rgba(255,255,255,.10); border-radius:18px; padding:18px; background:rgba(0,0,0,.35);">
          <div style="color: rgba(255,255,255,.75); letter-spacing:.18em; text-transform:uppercase; font-size:12px;">Coming soon</div>
          <div style="margin-top:10px; color: rgba(255,255,255,.55); line-height:1.7;">
            If you want, I can wire this to auto-render from a JSON list.
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="media">
      <div class="panel-inner">
        <h2 class="section-title">Media</h2>
        <p class="section-note">Same gallery logic you already had — just restyled.</p>
        <div class="media-gallery" id="media-gallery" style="margin-top:22px;"></div>
      </div>
    </section>

    <section class="panel" id="blog">
      <div class="panel-inner">
        <h2 class="section-title">Blog</h2>
        <p class="section-note">Placeholder for now. When you’re ready, we can load posts from a JSON file or Markdown.</p>

        <div style="margin-top:26px; border:1px solid rgba(255,0,0,.25); border-radius:18px; padding:18px; background:rgba(255,0,0,.06);">
          <div style="color:#fff; letter-spacing:.18em; text-transform:uppercase; font-size:12px;">No posts yet</div>
          <div style="margin-top:10px; color: rgba(255,255,255,.60); line-height:1.7;">
            Add your first post and this will become the feed.
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div style="letter-spacing:.18em; text-transform:uppercase; font-size:12px; color:rgba(255,255,255,.75);">
      © 2024 JARCHIVE.NET
    </div>
    <div class="footer-social-links">
      <a href="https://x.com/Jonathan_5910_" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i> Twitter
      </a>
      <a href="https://www.linkedin.com/in/jonathan-rodriguezjarchive/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i> LinkedIn
      </a>
      <a href="https://www.instagram.com/_jrrodriguezzz/" target="_blank" rel="noopener">
        <i class="fab fa-instagram"></i> Instagram
      </a>
    </div>
  </footer>

  <!-- shared scripts -->
  <script src="shared/audio-player.js"></script>
  <script src="shared/navigation.js"></script>

  <script>
    /* ===== Password Gate (client-side) ===== */
    const GATE_KEY = "jarchive_gate_ok_v1";
    const PASSWORD = "hiya";

    function openSite(){
      document.body.classList.remove("is-locked");
      const gate = document.getElementById("gate");
      if (gate) gate.style.display = "none";
    }

    function initGate(){
      document.body.classList.add("is-locked");

      if (localStorage.getItem(GATE_KEY) === "1") {
        openSite();
        return;
      }

      const form = document.getElementById("gateForm");
      const pass = document.getElementById("gatePass");
      const msg  = document.getElementById("gateMsg");

      if (pass) pass.focus();

      form?.addEventListener("submit", (e) => {
        e.preventDefault();
        e.stopPropagation();

        const entered = (pass?.value || "").trim();
        if (entered === PASSWORD) {
          localStorage.setItem(GATE_KEY, "1");
          openSite();
        } else {
          if (msg) msg.textContent = "ACCESS DENIED";
          if (pass) { pass.value = ""; pass.focus(); }
        }
      });
    }

    /* ===== Page logic ===== */
    function playLatestTrack() {
      if (!window.jarchivePlayer) return;
      const latest = window.jarchivePlayer.getLatestTrack?.();
      if (latest) window.jarchivePlayer.playTrackByTitle(latest.title);
    }

    function initializeMediaGallery() {
      const mediaItems = [
        { src: 'media/Photos/macBook.jpeg', title: 'Studio Setup', type: 'Photo' },
        { src: 'media/Photos/mix.png', title: 'Mixing Session', type: 'Photo' },
        { src: 'media/Videos/g6early.mp4', title: 'G6 Early', type: 'Video' },
        { src: 'media/Photos/weLit.png', title: 'We Lit', type: 'Photo' }
      ];

      const gallery = document.getElementById('media-gallery');
      if (!gallery) return;

      gallery.innerHTML = mediaItems.map(item => {
        const mediaEl = item.type === 'Video'
          ? `<video src="${item.src}" controls></video>`
          : `<img src="${item.src}" alt="${item.title}">`;

        return `
          <div class="media-item">
            ${mediaEl}
            <div class="media-overlay">
              <div class="media-title">${item.title}</div>
              <div class="media-type">${item.type}</div>
            </div>
          </div>
        `;
      }).join('');
    }

    function initActiveNav(){
      const links = Array.from(document.querySelectorAll('.side-nav a'));
      const sections = links
        .map(a => document.querySelector(a.getAttribute('href')))
        .filter(Boolean);

      const setActive = (id) => {
        links.forEach(a => a.classList.toggle('is-active', a.getAttribute('href') === '#' + id));
        const pill = document.querySelector('.top-brand .pill');
        if (pill) pill.textContent = (id === 'home') ? 'HOME' : id.toUpperCase();
      };

      const obs = new IntersectionObserver((entries) => {
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
        if (visible?.target?.id) setActive(visible.target.id);
      }, { threshold: [0.25, 0.5, 0.75] });

      sections.forEach(s => obs.observe(s));
      setActive('home');
    }

    function initScrollReveal(){
      const panels = Array.from(document.querySelectorAll('section.panel'));
      if (!panels.length) return;

      const obs = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) e.target.classList.add('is-visible');
        });
      }, { threshold: 0.12 });

      panels.forEach(p => obs.observe(p));
      panels[0].classList.add('is-visible');
    }

    function initLatestReleaseCard(){
      setTimeout(() => {
        if (!window.jarchivePlayer?.getLatestTrack) return;

        const latestTrack = window.jarchivePlayer.getLatestTrack();
        if (!latestTrack) return;

        const releaseCard = document.getElementById('latest-release-card');
        if (!releaseCard) return;

        releaseCard.innerHTML = `
          <img src="${latestTrack.cover}" alt="${latestTrack.title}" class="release-cover">
          <div class="release-info">
            <div class="release-title">${latestTrack.title}</div>
            <div class="release-artist">${latestTrack.artist}</div>
            <div class="release-date">Released: ${new Date(latestTrack.date).toLocaleDateString()}</div>
            <div class="release-actions">
              <button class="btn" type="button" onclick="playLatestTrack()">
                <i class="fas fa-play"></i> Play Now
              </button>
              <a href="${latestTrack.download}" class="btn" download>
                <i class="fas fa-download"></i> Download
              </a>
            </div>
          </div>
        `;
      }, 120);
    }

    document.addEventListener('DOMContentLoaded', () => {
      initGate();
      initializeMediaGallery();
      initActiveNav();
      initScrollReveal();
      initLatestReleaseCard();
    });
  </script>
</body>
</html>
